{% extends 'base.html' %} 

{% block title %}Búsqueda de Empresas{% endblock title %}

{% block content %}
    <h2>Búsqueda de Empresas</h2>
    <p>Busque una empresa usando el nombre.</p>

    <!-- Formulario de Búsqueda GET -->
    <form method="get" action="{% url 'buscar_empresa' %}"> 
        {% csrf_token %} 
        
        <label for="id_busqueda">Nombre a Buscar:</label>
        <input 
            type="text" 
            id="id_busqueda" 
            name="busqueda" 
            value="{{ termino_buscado|default:'' }}"
            placeholder="Introduzca el nombre de la empresa..."
        >
        
        <button type="submit">Buscar</button>
    </form>

    <hr>

    <h3>Resultados:</h3>

    {% if resultados %}
        <p>Se encontraron {{ resultados|length }} empresa(s) que coinciden con "{{ termino_buscado }}":</p>
        
        <ul>
        {% for empresa in resultados %}
            <li>
                {{ empresa.nombre }} (País: {{ empresa.pais }})
                
                | <a href="{% url 'ver_empresa' empresa.pk %}">Ver</a> 
                | <a href="{% url 'actualizar_empresa' empresa.pk %}">Actualizar</a> 
                | <a href="{% url 'eliminar_empresa' empresa.pk %}">Eliminar</a>
            </li>
        {% endfor %}
        </ul>
    {% elif termino_buscado %}
        <p>No se encontraron empresas que coincidan con "{{ termino_buscado }}".</p>
    {% else %}
        <p>Introduzca un término y presione Buscar.</p>
    {% endif %}

{% endblock content %}